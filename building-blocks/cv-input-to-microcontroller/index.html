<!DOCTYPE html>
<html>
    <head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="/css/style.b5df31f513f3bec62ffeec00d1f9b2aee38dc35f5212aab2e1492c4a8dfa7be3.css" integrity="sha256-td8x9RPzvsYv/uwA0fmyruONw19SEqqy4UksSo36e&#43;M=">
	<title>CV Input to Microcontroller | SynthDIY Wiki</title>
</head>

    <body>
        <header>
	<a id=logo href="https://wiki.synthdiy.com">
		<p style="margin: 0; color: white;">logo goes here</p>
	</a>
	<nav>
	<a class=menubutton href="/">Home</a>
	<a class=menubutton href="/modules">Modules</a>
	<a class=menubutton href="/parts">Parts</a>
	<a class=menubutton href="/building-blocks">Building Blocks</a>
	<a class=menubutton href="/knowledge">Knowledge</a>
	<a class=menubutton href="/contribute">Contribute</a>
	<a class=menubutton href="/tags">Tags</a>
</nav>
</header>

        <div id="content">
<h1>CV Input to Microcontroller</h1>
<p>Many digital modules will need at least one CV input, however you have likely noticed that while Eurorack can have ±12V travelling through its patch cables, most microcontrollers will be very unhappy to receive anything outside of the range 0-3.3V.
To allow you to &lsquo;read&rsquo; the whole 12V CV range, you need to perform something called &lsquo;signal conditioning&rsquo;.
This means that you want to &lsquo;condition&rsquo; the potential range of ±12V into 0-3.3V, cutting out any parts you don&rsquo;t need to read, and scaling the parts that you do to the readable range.</p>
<p>One excellent circuit for doing just this, has been designed by Émilie Gillet of Mutable Instruments.</p>
<h3 id="mutable-instruments-cv-input-stage-used-in-braids">Mutable Instruments&rsquo; CV Input Stage (used in Braids)</h3>
<p><img src="mutable-instruments-cv-input.png" alt="Mutable Instruments CV Input Stage"></p>
<p>All credit goes to Émilie Gillet of Mutable Instruments.</p>
<p>This circuit has two op-amps, which both perform very important functions.
The first op-amp (a TL07X) is set up as an inverting amplifier, so it is able to have a gain of less than 1 (Non-inverting amplifiers can only have a gain of greater than or equal to 1).</p>
<p>Its gain is -0.25, which will turn +12V into -3V, and -12V into +3V.
We still have a problem that the voltage enters negative potential, and that the voltages have been flipped.</p>
<p>Now op-amps always clip the incoming signal depending on the power supply they are given, but &lsquo;rail-to-rail&rsquo; op-amps clip very precisely, incredibly close to the power rails they are provided with.</p>
<p>Thus, by providing the second op-amp with a power supply of Ground and +3.3V, the outgoing signal has always been clipped to an absolute minimum and maximum of 0-3.3V, so cannot harm the microcontroller&rsquo;s input.</p>
<p>The op-amp used for this is an MCP600X, as it is rail-to-rail, and it is also set up in the inverting configuration, so that it will flip the voltages back to
positive = positive.</p>
<p>This circuit in its entirety will thus take a signal that potentially is anywhere in the range ±12V, and allow you to &lsquo;read&rsquo; 0-12V, and will safely clip anything below 0V to keep it at 0V. This is of course a limitation of this circuit; that it cannot &lsquo;read&rsquo; negative input CV.</p>
<p>This is an <a href="https://www.falstad.com/circuit/circuitjs.html?cct=$+1+0.000005+10.20027730826997+50+5+43%0Aa+128+256+240+256+8+12+-12+1000000+0.000023399707503656204+0+100000%0Aa+336+272+448+272+8+3.3+0+1000000+-0.000023399239518865825+0+100000%0Ar+128+176+240+176+0+25000%0Ar+128+176+16+176+0+100000%0Ar+240+256+336+256+0+25000%0Aw+240+176+240+256+0%0Aw+128+240+128+176+0%0Ar+336+208+448+208+0+25000%0Aw+336+208+336+256+0%0Aw+448+208+448+272+0%0Ag+128+272+128+288+0%0Ag+336+288+336+304+0%0AO+448+272+496+272+0%0A172+16+176+-64+176+0+7+9.36+12+-12+0+0.5+Voltage%0Ao+12+64+0+4098+5+0.1+0+1%0A">interactive version of the schematic</a> created by <a href="https://twitter.com/theavalkyrie">Thea Flowers (Stargirl)</a> of <a href="https://winterbloom.com/">Winterbloom</a></p>


        </div></body>
</html>
